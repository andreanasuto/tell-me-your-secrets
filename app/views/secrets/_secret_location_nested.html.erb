<script type="text/javascript">
    $('body').on('submit','.new_secret', function(event) {
        //prevent form from submitting the default way
        event.preventDefault()

        let values = $(this).serialize()

        let posting = $.post('/secrets.json', values)

        posting.done(function(secret) {
          const newSecret = new Secret(secret['secret'])
          let html = newSecret.formatSecretAtLocation()
          $(`.secrets`).append(html)
        }).fail(function(error){
          $('.secret_sentence').attr('placeholder', error.responseJSON.sentence[0]).css('border', '0.125rem solid red')
        })
        event.stopImmediatePropagation();
    })
</script>
